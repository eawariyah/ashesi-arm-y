<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" href="images/tentativeFavicon.png" />
    <title>Sign-Up</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css"
      integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="./css/style1.css" />
    <title>Register form</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script>
      // Initialize Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyCMJ1PumFhOQmvl3thUAHG5ddKOCTD3rxo",
        authDomain: "ashesi-arm-y.firebaseapp.com",
        projectId: "ashesi-arm-y",
        storageBucket: "ashesi-arm-y.appspot.com",
        messagingSenderId: "1069096083638",
        appId: "1:1069096083638:web:617337365051f947600617",
        measurementId: "G-F40BZM1WQ9",
      };
      firebase.initializeApp(firebaseConfig);

      // Get a reference to the Firestore database
      const db = firebase.firestore();

      // Function to handle form submission
      // Function to handle form submission
      function signUp(event) {
        event.preventDefault();

        // Get form values
        const firstName = document.getElementById("firstName").value;
        const lastName = document.getElementById("lastName").value;

        const email = document.getElementById("email").value;
        const major = document.getElementById("major").value;
        const yearGroup = document.getElementById("yearGroup").value;
        const gender = document.getElementById("gender").value;
        const phone = document.getElementById("phone").value;
        // const password = document.getElementById("password").value;
        // const confirmPassword =
        //   document.getElementById("confirmPassword").value;
        const pin = document.getElementById("pin").value;
        const merch = document.getElementById("merch").value;

        // Check if the pin is correct
        if (pin !== "1234") {
          alert("Incorrect pin. Please enter the correct pin.");
          return;
        }

        // Create a user object
        const user = {
          firstName,
          lastName,
          email,
          major,
          yearGroup,
          gender,
          phone,
          // password,
          pin,
          merch,
        };

        // Save user details to Firestore
        db.collection("users")
          .add(user)
          .then(() => {
            // Redirect to signin.html after successful signup
            window.location.href = "signin.html";
          })
          .catch((error) => {
            console.error("Error adding document: ", error);
          });
      }
    </script>
  </head>
  <body>
    <div class="text-center">
      <div class="container-xl" id="mainBody">
        <br />
        <img src="images/tentative.png" style="margin-bottom: 49px" />
        <h3 id="createText">Create your account</h3>
        <form class="signup-form" onsubmit="signUp(event)">
          <div class="nameGroup" style="flex-direction: row">
            <!-- <label for="username">Full Name:</label> -->
            <input
              type="text"
              id="firstName"
              name="username"
              placeholder="First Name"
              style="align-items: flex-start"
              required
            />
            <input
              type="text"
              id="lastName"
              name="username"
              placeholder="Last Name"
              style="align-items: flex-end"
              required
            />
          </div>
          <div class="form-group">
            <!-- <label for="email">Ashesi Email:</label> -->
            <input
              type="email"
              id="email"
              name="email"
              placeholder="Ashesi Email"
              required
            />
          </div>
          <div class="form-group">
            <select id="major" name="major" required>
              <option value="" disabled selected hidden>Major</option>
              <option value="Computer Science">Computer Science</option>
              <option value="Computer Engineering">Computer Engineering</option>
              <option value="Computer Engineering">Mechatronics</option>

              <option value="Electrical Engineering">
                Electrical Engineering
              </option>
              <option value="Mechanical Engineering">
                Mechanical Engineering
              </option>
            </select>
          </div>

          <div class="form-group">
            <select id="yearGroup" name="yearGroup" required>
              <option value="" disabled selected hidden>Year Group</option>
              <option value="2024">2024</option>
              <option value="2025">2025</option>
              <option value="2026">2026</option>
              <option value="2027">2027</option>
            </select>
          </div>

          <div class="form-group">
            <!-- <label for="gender">Gender:</label> -->
            <input
              type="text"
              id="gender"
              name="gender"
              placeholder="Gender"
              required
            />
          </div>
          <div class="form-group">
            <!-- <label for="phone">Phone Number:</label> -->
            <input
              type="list"
              id="phone"
              name="phone"
              placeholder="Phone Number"
              required
            />
          </div>

          <div class="form-group">
            <div class="form-group">
              <!-- <label for="pin">Pin:</label> -->
              <input
                type="text"
                id="pin"
                name="pin"
                placeholder="Pin"
                required
              />
            </div>

            <!-- <label for="merch">Do you have ARM merchandise (t-shirts)?:</label>
            <input type="checkbox" id="merch" name="merch" required /> -->
          </div>
          <div class="form-group">
            <select id="merch" name="merch" required>
              <option value="" disabled selected hidden>
                Do you have ARM merchandise (t-shirt)?
              </option>
              <option value="Yes">Yes</option>
              <option value="No">No</option>
            </select>
          </div>
          <button type="submit">Sign Up</button>
        </form>
        <a href="signin.html"><button>Or Sign In Here</button></a>
      </div>
      <div class="container-xl" id="mainBody2">
        <img src="images/Generateda.png" />
      </div>
    </div>
  </body>
</html>
