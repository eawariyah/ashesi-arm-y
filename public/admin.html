<!DOCTYPE html>
<html>
  <head>
    <title>User Details</title>
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <style>
      table {
        width: 100%;
        border-collapse: collapse;
      }

      th,
      td {
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #ddd;
      }

      th {
        background-color: #f2f2f2;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>User Details</h1>
      <table>
        <thead>
          <tr>
            <th>Full Name</th>
            <th>Email</th>
            <th>Major</th>
            <th>Year Group</th>
            <th>Gender</th>
            <th>Phone Number</th>
            <th>Merchandise</th>
          </tr>
        </thead>
        <tbody id="userTableBody"></tbody>
      </table>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script>
      // Initialize Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyCMJ1PumFhOQmvl3thUAHG5ddKOCTD3rxo",
        authDomain: "ashesi-arm-y.firebaseapp.com",
        projectId: "ashesi-arm-y",
        storageBucket: "ashesi-arm-y.appspot.com",
        messagingSenderId: "1069096083638",
        appId: "1:1069096083638:web:617337365051f947600617",
        measurementId: "G-F40BZM1WQ9",
      };
      firebase.initializeApp(firebaseConfig);

      // Get a reference to the Firestore database
      const db = firebase.firestore();

      // Retrieve user details from Firestore and populate the table
      db.collection("users")
        .get()
        .then((querySnapshot) => {
          const userTableBody = document.getElementById("userTableBody");

          querySnapshot.forEach((doc) => {
            const user = doc.data();
            const row = document.createElement("tr");

            const fullNameCell = document.createElement("td");
            fullNameCell.textContent = user.username;
            row.appendChild(fullNameCell);

            const emailCell = document.createElement("td");
            emailCell.textContent = user.email;
            row.appendChild(emailCell);

            const majorCell = document.createElement("td");
            majorCell.textContent = user.major;
            row.appendChild(majorCell);

            const yearGroupCell = document.createElement("td");
            yearGroupCell.textContent = user.yearGroup;
            row.appendChild(yearGroupCell);

            const genderCell = document.createElement("td");
            genderCell.textContent = user.gender;
            row.appendChild(genderCell);

            const phoneCell = document.createElement("td");
            phoneCell.textContent = user.phone;
            row.appendChild(phoneCell);

            const merchCell = document.createElement("td");
            merchCell.textContent = user.merch ? "Yes" : "No";
            row.appendChild(merchCell);

            userTableBody.appendChild(row);
          });
        })
        .catch((error) => {
          console.error("Error retrieving user details: ", error);
        });
    </script>
  </body>
</html>
